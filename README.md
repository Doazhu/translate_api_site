# translate_api_site | Веб-приложение для перевода текстов (DeepL Translator)

## Описание проекта

Веб-приложение для быстрого и качественного перевода текстов между различными языками с использованием DeepL API. Приложение позволяет пользователям регистрироваться, выполнять переводы, сохранять историю и управлять избранными переводами.

## Технологический стек

- **Frontend**: HTML + CSS + JavaScript
- **Backend**: FastAPI (Python)
- **База данных**: SQLite
- **Внешний API**: DeepL Translation API

---

## Основные последовательности взаимодействия

1. **Регистрация и аутентификация пользователя**
   - Пользователь заполняет форму регистрации (email, пароль, имя)
   - Сервер проверяет уникальность email
   - Создается запись в БД с хешированным паролем
   - Генерируется JWT токен для авторизации

2. **Выполнение перевода текста**
   - Пользователь вводит текст и выбирает языковую пару
   - Запрос отправляется на сервер с JWT токеном
   - Сервер проверяет авторизацию
   - Запрос передается в DeepL API
   - Результат сохраняется в историю переводов
   - Перевод возвращается пользователю

3. **Просмотр истории переводов**
   - Пользователь запрашивает список своих переводов
   - Сервер извлекает данные из БД по user_id
   - История отображается с пагинацией

4. **Добавление перевода в избранное**
   - Пользователь выбирает перевод из истории
   - Сервер обновляет поле is_favorite в БД
   - Интерфейс обновляется

5. **Управление профилем пользователя**
   - Просмотр и редактирование данных профиля
   - Изменение пароля
   - Просмотр статистики использования

6. **Выбор языковых пар для перевода**
   - Динамическая загрузка доступных языков из DeepL API
   - Автоопределение исходного языка (опционально)

7. **Экспорт истории переводов**
   - Пользователь запрашивает экспорт
   - Сервер генерирует CSV/JSON файл
   - Файл скачивается на устройство пользователя

---

## Основные сущности системы

### Технические компоненты:

1. **Пользователь (User)** - конечный пользователь приложения
2. **Веб-браузер (Browser)** - клиентская часть интерфейса
3. **FastAPI сервер (Backend Server)** - серверная логика, REST API
4. **SQLite Database** - локальное хранилище данных
5. **DeepL API** - внешний сервис машинного перевода
6. **JWT Session Manager** - управление сессиями и авторизацией

### Бизнес-сущности:

1. **Translation** - запись о выполненном переводе
2. **User Profile** - профиль пользователя
3. **Favorite** - избранный перевод
4. **Language Pair** - пара языков (исходный → целевой)
5. **API Key** - ключ доступа к DeepL API

---

## Архитектура приложения

```
┌─────────────────┐
│   Web Browser   │
│  (HTML/CSS/JS)  │
└────────┬────────┘
         │ HTTP/REST
         ▼
┌─────────────────┐
│  FastAPI Server │
│   (Python)      │
└────┬───────┬────┘
     │       │
     │       └──────────────┐
     ▼                      ▼
┌─────────────┐      ┌──────────────┐
│   SQLite    │      │  DeepL API   │
│  Database   │      │  (External)  │
└─────────────┘      └──────────────┘
```

---

## Основные API эндпоинты

### Аутентификация
- `POST /api/auth/register` - регистрация нового пользователя
- `POST /api/auth/login` - вход в систему
- `POST /api/auth/logout` - выход из системы

### Переводы
- `POST /api/translate` - выполнить перевод
- `GET /api/translations` - получить историю переводов
- `GET /api/translations/{id}` - получить конкретный перевод
- `DELETE /api/translations/{id}` - удалить перевод из истории

### Избранное
- `POST /api/favorites/{translation_id}` - добавить в избранное
- `DELETE /api/favorites/{translation_id}` - удалить из избранного
- `GET /api/favorites` - получить все избранные переводы

### Профиль
- `GET /api/profile` - получить данные профиля
- `PUT /api/profile` - обновить профиль
- `POST /api/profile/change-password` - изменить пароль

### Утилиты
- `GET /api/languages` - получить список доступных языков
- `GET /api/export/history` - экспортировать историю

---

## Структура базы данных

### Таблица: users
- id (INTEGER PRIMARY KEY)
- email (TEXT UNIQUE NOT NULL)
- password_hash (TEXT NOT NULL)
- name (TEXT)
- created_at (TIMESTAMP)
- last_login (TIMESTAMP)

### Таблица: translations
- id (INTEGER PRIMARY KEY)
- user_id (INTEGER FOREIGN KEY)
- source_text (TEXT NOT NULL)
- translated_text (TEXT NOT NULL)
- source_lang (TEXT)
- target_lang (TEXT NOT NULL)
- is_favorite (BOOLEAN DEFAULT FALSE)
- created_at (TIMESTAMP)

### Таблица: api_settings
- id (INTEGER PRIMARY KEY)
- deepl_api_key (TEXT NOT NULL)
- daily_request_limit (INTEGER)
- current_usage (INTEGER)

---

## Безопасность

- JWT токены для авторизации
- Хеширование паролей (bcrypt)
- HTTPS для продакшена
- Rate limiting для API
- Валидация входных данных
- CORS настройки

---

## Планируемые улучшения

- Поддержка множества языков интерфейса
- Кэширование частых переводов
- Расширенная статистика использования
- Совместное использование переводов
- Интеграция с другими переводческими API (резервный вариант)
- Мобильная версия интерфейса
